# ウィンドウデザイン

issue: https://github.com/kc7891/lol-viewer/issues/74

## 概要

LoL Viewer のメインウィンドウレイアウト設計。アプリケーションは左サイドバー + 右メインコンテンツの2カラム構成を採用する。

## ウィンドウレイアウト

```
┌──────────────────────────────────────────────────────────────────┐
│ LoL Viewer                                              [−][□][×]│
├────────────┬─────────────────────────────────────────────────────┤
│            │                                                     │
│  Sidebar   │              Main Content Area                      │
│            │                                                     │
│ ┌────────┐ │  ┌─────────────────────────────────────────────┐    │
│ │Live Game│ │  │                                             │    │
│ │Viewers │ │  │                                             │    │
│ │Settings│ │  │        (選択中のタブに応じた表示)             │    │
│ └────────┘ │  │                                             │    │
│            │  │                                             │    │
│ (タブ別    │  │                                             │    │
│  コンテンツ)│  │                                             │    │
│            │  │                                             │    │
│            │  └─────────────────────────────────────────────┘    │
│            │                                                     │
│ ┌────────┐ │                                                     │
│ │LCU状態 │ │                                                     │
│ └────────┘ │                                                     │
├────────────┴─────────────────────────────────────────────────────┤
└──────────────────────────────────────────────────────────────────┘
```

### サイズ

- ウィンドウ初期サイズ: 1600×900px
- サイドバー最小幅: 150px
- サイドバーデフォルト幅: 200px (QSettingsで永続化)
- サイドバーはQSplitterでリサイズ可能

## サイドバー構成

サイドバーは `QTabWidget` で3つのタブを持つ。タブ切り替えでメインコンテンツも連動して切り替わる。

### タブ0: Live Game
- ラベルテキスト表示のみ（メインコンテンツ側にWebView表示）

### タブ1: Viewers (デフォルト選択)
- `QListWidget` でビューア一覧を表示
- ダブルクリックでビューアの表示/非表示を切り替え

### タブ2: Settings
- ラベルテキスト表示のみ（メインコンテンツ側に設定画面表示）

## ChampionViewerWidget デザイン

各ビューアウィジェットのレイアウト。issue #74 のワイヤーフレームに基づく。

### レイアウト

```
┌──────────────────────────────────────────────────────┐
│ [icon] Darius vs Garen                               │ Header
├──────────────────────────────────────────────────────┤
│ [Build][Counter][ARAM]    [icon Darius▾] vs [icon Garen▾] × │ Control bar
├──────────────────────────────────────────────────────┤
│                                                      │
│   (Build/Counter/ARAM 選択時)                        │
│         WebView                                      │
│                                               [QR]   │
│                                                      │
│   (Champion/Opponent セレクター展開時)                │
│   ┌────────────────────────────────────────────┐     │
│   │         SELECT CHAMPION                    │     │
│   │  🔍 Search...                              │     │
│   │  ┌──────────────────────────────────────┐  │     │
│   │  │ [icon] Darius                        │  │     │
│   │  │ [icon] Garen                         │  │     │
│   │  │ [icon] Lee Sin                       │  │     │
│   │  │ [icon] Elise                         │  │     │
│   │  │ [icon] Ahri                          │  │     │
│   │  │ [icon] Zed                           │  │     │
│   │  └──────────────────────────────────────┘  │     │
│   └────────────────────────────────────────────┘     │
└──────────────────────────────────────────────────────┘
```

### デザイン原則

- **すべてのボタン、セレクターはShrinkさせる** — コンパクトなサイズ
- **ウィンドウサイズが大きい場合**: ボタンを左寄せ、セレクターを右寄せ（中間にstretchを配置）
- ヘッダー右上の別ウィンドウアイコンは不要

### 構成要素

| 要素 | 説明 |
|------|------|
| Header | 選択中チャンピオンのアイコン + "Champion vs Opponent" テキスト |
| Control bar 左側 | Build / Counter / ARAM のコンパクトなタブボタン（左寄せ） |
| Control bar 右側 | チャンピオンセレクター pill + "vs" + オポーネントセレクター pill + × (右寄せ) |
| セレクター pill | アイコン + チャンピオン名 + ▾ のドロップダウン風ボタン |
| × ボタン | ビューアを閉じるボタン（コンパクト） |
| Champion セレクター | "SELECT CHAMPION" ヘッダー + 検索フィールド + アイコン付きチャンピオンリスト |
| WebView | Build/Counter/ARAM 選択時にlolalytics/u.gg情報を表示 |
| QRコードオーバーレイ | WebView右下にフローティング表示 |

### チャンピオン選択フロー

1. チャンピオン/オポーネントの pill ボタンをクリック → チャンピオンセレクターパネルが表示
2. "SELECT CHAMPION" ヘッダーの下で検索フィールドに入力 → リストがフィルタリング
3. チャンピオンアイコン+名前の行をクリック → 対象の pill ボタンに反映 + ヘッダー更新
4. WebView に戻り、選択中モード (Build/Counter/ARAM) のページを自動表示

## チャンピオン自動検出時のビューア動作

LCU API 経由でチャンピオン選択を検知した際:

1. **味方チャンピオン検出** → Build ビューアを自動で開く (左端に挿入)
2. **敵チャンピオン検出** → Counter ビューアを自動で開く
3. **ARAM モード** → ARAM URL でビューアを開く

## 未実装: 相手チャンピオンセレクター (自動)

> note: This images doesn't contains opponent champion selector. But we need it when implement.
> — issue #74

現在のワイヤーフレームには自動検出された相手チャンピオン5体を一括表示する機能が含まれていない。手動でのオポーネント選択は pill ボタンで実装済み。

関連: [TODO.md](../../TODO.md) — 相手チャンピオン5体のカウンターページ自動表示機能
