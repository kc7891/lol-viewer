# ウィンドウデザイン

issue: https://github.com/kc7891/lol-viewer/issues/74

## 概要

LoL Viewer のメインウィンドウレイアウト設計。アプリケーションは左サイドバー + 右メインコンテンツの2カラム構成を採用する。

## ウィンドウレイアウト

```
┌──────────────────────────────────────────────────────────────────┐
│ LoL Viewer                                              [−][□][×]│
├────────────┬─────────────────────────────────────────────────────┤
│            │                                                     │
│  Sidebar   │              Main Content Area                      │
│            │                                                     │
│ ┌────────┐ │  ┌─────────────────────────────────────────────┐    │
│ │Live Game│ │  │                                             │    │
│ │Viewers │ │  │                                             │    │
│ │Settings│ │  │        (選択中のタブに応じた表示)             │    │
│ └────────┘ │  │                                             │    │
│            │  │                                             │    │
│ (タブ別    │  │                                             │    │
│  コンテンツ)│  │                                             │    │
│            │  │                                             │    │
│            │  └─────────────────────────────────────────────┘    │
│            │                                                     │
│ ┌────────┐ │                                                     │
│ │LCU状態 │ │                                                     │
│ └────────┘ │                                                     │
├────────────┴─────────────────────────────────────────────────────┤
└──────────────────────────────────────────────────────────────────┘
```

### サイズ

- ウィンドウ初期サイズ: 1600×900px
- サイドバー最小幅: 150px
- サイドバーデフォルト幅: 200px (QSettingsで永続化)
- サイドバーはQSplitterでリサイズ可能

## サイドバー構成

サイドバーは `QTabWidget` で3つのタブを持つ。タブ切り替えでメインコンテンツも連動して切り替わる。

```
┌────────────────────┐
│[Live Game][Viewers][Settings]│  ← タブバー
├────────────────────┤
│                    │
│  タブ別コンテンツ    │
│                    │
│                    │
├────────────────────┤
│ ● LCU接続状態      │  ← LCUConnectionStatusWidget
└────────────────────┘
```

### タブ0: Live Game
- ラベルテキスト表示のみ（メインコンテンツ側にWebView表示）

### タブ1: Viewers (デフォルト選択)
- `QListWidget` でビューア一覧を表示
- ダブルクリックでビューアの表示/非表示を切り替え

### タブ2: Settings
- ラベルテキスト表示のみ（メインコンテンツ側に設定画面表示）

## メインコンテンツ構成

`QStackedWidget` で3ページを切り替える。サイドバーのタブと連動。

### ページ0: Live Game

```
┌─────────────────────────────────────┐
│                                     │
│         QWebEngineView              │
│      (live_game_url を表示)          │
│                                     │
│                              [QR]   │  ← QRコードオーバーレイ (右下)
└─────────────────────────────────────┘
```

### ページ1: Viewers

```
┌─────────────────────────────────────┐
│ [Ally vs Enemy マッチアップリスト]    │  ← MatchupListWidget (Feature Flag)
├─────────────────────────────────────┤
│                 [Close All] [＋ Add] │  ← ツールバー (高さ60px)
├───────────┬───────────┬─────────────┤
│ Viewer 1  │ Viewer 2  │  Viewer N   │  ← QSplitter (水平、リサイズ可能)
│           │           │             │
│ (下記参照) │ (下記参照) │  (下記参照)  │
└───────────┴───────────┴─────────────┘
```

- 最大20個のビューアを追加可能

### ページ2: Settings

```
┌─────────────────────────────────────┐
│ Settings                            │
│                                     │
│ Analytics URLs                      │
│ ├ Build URL:    [________________] │
│ ├ Matchup URL:  [________________] │
│ ├ Counter URL:  [________________] │
│ ├ ARAM URL:     [________________] │
│ └ Live Game URL:[________________] │
│                                     │
│ Display Settings                    │
│ ├ [✓] QR Code Overlay              │
│                                     │
│ Feature Flags (Experimental)        │
│ ├ [ ] Matchup List                  │
│                                     │
│ Version Info / Update Check         │
└─────────────────────────────────────┘
```

## ChampionViewerWidget デザイン

各ビューアウィジェットのレイアウト。issue #74 のワイヤーフレームに基づく。

```
┌────────────────────────────────────┐
│ [icon] Champion Name      [−] [×] │  ← チャンピオン表示ヘッダー
├────────────────────────────────────┤
│ [Build] [Counter] [ARAM] [Champion▾] │  ← モードタブバー
├────────────────────────────────────┤
│                                    │
│   (Build/Counter/ARAM 選択時)       │
│         WebView                    │
│                             [QR]   │
│                                    │
│   (Champion▾ 選択時)               │
│   🔍 Search champions...          │
│   ┌──────────────────────────────┐ │
│   │ [icon] Darius                │ │
│   │ [icon] Garen                 │ │
│   │ [icon] Lee Sin               │ │
│   │ [icon] Elise                 │ │
│   │ [icon] Ahri                  │ │
│   │ [icon] Zed                   │ │
│   │ [icon] Jinx                  │ │
│   │ [icon] ...                   │ │
│   └──────────────────────────────┘ │
└────────────────────────────────────┘
```

### 構成要素

| 要素 | 説明 |
|------|------|
| チャンピオン表示ヘッダー | 選択中チャンピオンのアイコン + 名前を表示 |
| モードタブバー | Build / Counter / ARAM / Champion のタブ切り替え |
| Champion タブ | チャンピオンセレクターパネルを表示（検索 + リスト） |
| チャンピオンリスト | アイコン付きのスクロール可能なチャンピオン一覧 |
| WebView | Build/Counter/ARAM 選択時にlolalytics/u.gg情報を表示 |
| QRコードオーバーレイ | WebView右下にフローティング表示 |

### チャンピオン選択フロー

1. Champion▾ タブをクリック → チャンピオンセレクターパネルが表示される
2. 検索フィールドに入力 → リストがフィルタリングされる
3. チャンピオンを選択 → ヘッダーに反映、前回選択していたモード (Build/Counter/ARAM) のページを表示

## チャンピオン自動検出時のビューア動作

LCU API 経由でチャンピオン選択を検知した際:

1. **味方チャンピオン検出** → Build ビューアを自動で開く (左端に挿入)
2. **敵チャンピオン検出** → Counter ビューアを自動で開く
3. **ARAM モード** → ARAM URL でビューアを開く

## 未実装: 相手チャンピオンセレクター

> note: This images doesn't contains opponent champion selector. But we need it when implement.
> — issue #74

現在のワイヤーフレームには相手チャンピオンセレクター（BanPick画面で相手が選択した5体のチャンピオンを表示・選択する機能）が含まれていない。実装時にはこのコンポーネントを追加する必要がある。

関連: [TODO.md](../../TODO.md) — 相手チャンピオン5体のカウンターページ自動表示機能
